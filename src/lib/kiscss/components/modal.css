.modal {
  text-align: center;

  /* Control element to show/hide without JavaScript */
  > input {
    display: none;

    ~ * {
      /* Not visible by default */
      opacity: 0;

      /* Not meant for interaction by default */
      max-height: 0;
      overflow: hidden;
    }
  }

  .overlay {
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    position: fixed;
    margin: 0;
    border-radius: 0;
    background: rgba(var(--black), calc(3 * var(--transparency)));
    transition: var(--transition);
    z-index: 300;

    &::before,
    &::after {
      display: none;
    }

    /* All elements that follow the overlay (the modals)... */
    ~ * {
      /* Can be everything included in a .card */
      /* TODO @include card(); */

      border: 0;

      /* Position the contents in the middle and top of everything on the screen */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%) scale(0.2, 0.2);
      z-index: 1000000;

      /* Closing effect */
      transition: var(--transition);
    }
  }

  /* Show modal when checked */
  > input:checked {
    ~ * {
      display: block;
      opacity: 1;
      max-height: 10000px;
      /* Opening effect */
      transition: var(--transition);
    }

    /* Grab everything in modal that is after the overlay after the input */
    ~ .overlay ~ * {
      max-height: 90%;
      overflow: auto;
      -webkit-transform: translateX(-50%) translateY(-50%) scale(1, 1);
      transform: translateX(-50%) translateY(-50%) scale(1, 1);
    }
  }
}

/* 
sadly we cannot use custom property for evaluating @custom-media, so
we have to hard code the '--breakpoint'
see https://bholmes.dev/blog/alternative-to-css-variable-media-queries/
see https://parceljs.org/languages/css/#custom-media-queries
*/
@custom-media --modalBreakAt (max-width: 768px);

@media (--modalBreakAt) {
  .modal .overlay ~ * {
    min-width: 90%;
  }
}
